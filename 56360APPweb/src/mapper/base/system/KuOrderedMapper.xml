<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kuheng.dao.KuOrderedMapper" >
  <resultMap id="BaseResultMap" type="com.kuheng.entity.member.KuOrdered" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jul 15 09:11:17 CST 2017.
    -->
    <id column="itemid" property="itemid" jdbcType="INTEGER" />
    <result column="ordersid" property="ordersid" jdbcType="BIGINT" />
    <result column="userid" property="userid" jdbcType="INTEGER" />
    <result column="sendcompany" property="sendcompany" jdbcType="VARCHAR" />
    <result column="sendrealname" property="sendrealname" jdbcType="VARCHAR" />
    <result column="sendmobile" property="sendmobile" jdbcType="VARCHAR" />
    <result column="sendarea" property="sendarea" jdbcType="INTEGER" />
    <result column="sendaddress" property="sendaddress" jdbcType="VARCHAR" />
    <result column="recarea" property="recarea" jdbcType="INTEGER" />
    <result column="recrealname" property="recrealname" jdbcType="VARCHAR" />
    <result column="recmobile" property="recmobile" jdbcType="VARCHAR" />
    <result column="recaddress" property="recaddress" jdbcType="VARCHAR" />
    <result column="carlength" property="carlength" jdbcType="VARCHAR" />
    <result column="cartype" property="cartype" jdbcType="VARCHAR" />
    <result column="goodsweight" property="goodsweight" jdbcType="VARCHAR" />
    <result column="title" property="title" jdbcType="VARCHAR" />
    <result column="allfee" property="allfee" jdbcType="DECIMAL" />
    <result column="goodsnote" property="goodsnote" jdbcType="VARCHAR" />
    <result column="runstatus" property="runstatus" jdbcType="VARCHAR" />
    <result column="payway" property="payway" jdbcType="INTEGER" />
    <result column="addtime" property="addtime" jdbcType="INTEGER" />
    <result column="updatetime" property="updatetime" jdbcType="INTEGER" />
    <result column="signtime" property="signtime" jdbcType="INTEGER" />
    <result column="delstatus" property="delstatus" jdbcType="INTEGER" />
    <result column="evaluation" property="evaluation" jdbcType="INTEGER" />
    <result column="transportbyid" property="transportbyid" jdbcType="INTEGER" />
    <result column="editer" property="editer" jdbcType="VARCHAR" />
    <result column="longitude" property="longitude" jdbcType="DECIMAL" />
    <result column="latitude" property="latitude" jdbcType="DECIMAL" />
    <result column="status" property="status" jdbcType="BIT" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jul 15 09:11:17 CST 2017.
    -->
    itemid, ordersid, userid, sendcompany, sendrealname, sendmobile, sendarea, sendaddress, 
    recarea, recrealname, recmobile, recaddress, carlength, cartype, goodsweight, title, 
    allfee, goodsnote, runstatus, payway, addtime, updatetime, signtime, delstatus, evaluation, 
    transportbyid, editer, longitude, latitude, status
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jul 15 09:11:17 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from ku_ordered
    where itemid = #{itemid,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jul 15 09:11:17 CST 2017.
    -->
    delete from ku_ordered
    where itemid = #{itemid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.kuheng.entity.member.KuOrdered" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jul 15 09:11:17 CST 2017.
    -->
    insert into ku_ordered (itemid, ordersid, userid, 
      sendcompany, sendrealname, sendmobile, 
      sendarea, sendaddress, recarea, 
      recrealname, recmobile, recaddress, 
      carlength, cartype, goodsweight, 
      title, allfee, goodsnote, 
      runstatus, payway, addtime, 
      updatetime, signtime, delstatus, 
      evaluation, transportbyid, editer, 
      longitude, latitude, status
      )
    values (#{itemid,jdbcType=INTEGER}, #{ordersid,jdbcType=BIGINT}, #{userid,jdbcType=INTEGER}, 
      #{sendcompany,jdbcType=VARCHAR}, #{sendrealname,jdbcType=VARCHAR}, #{sendmobile,jdbcType=VARCHAR}, 
      #{sendarea,jdbcType=INTEGER}, #{sendaddress,jdbcType=VARCHAR}, #{recarea,jdbcType=INTEGER}, 
      #{recrealname,jdbcType=VARCHAR}, #{recmobile,jdbcType=VARCHAR}, #{recaddress,jdbcType=VARCHAR}, 
      #{carlength,jdbcType=VARCHAR}, #{cartype,jdbcType=VARCHAR}, #{goodsweight,jdbcType=VARCHAR}, 
      #{title,jdbcType=VARCHAR}, #{allfee,jdbcType=DECIMAL}, #{goodsnote,jdbcType=VARCHAR}, 
      #{runstatus,jdbcType=VARCHAR}, #{payway,jdbcType=INTEGER}, #{addtime,jdbcType=INTEGER}, 
      #{updatetime,jdbcType=INTEGER}, #{signtime,jdbcType=INTEGER}, #{delstatus,jdbcType=INTEGER}, 
      #{evaluation,jdbcType=INTEGER}, #{transportbyid,jdbcType=INTEGER}, #{editer,jdbcType=VARCHAR}, 
      #{longitude,jdbcType=DECIMAL}, #{latitude,jdbcType=DECIMAL}, #{status,jdbcType=BIT}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.kuheng.entity.member.KuOrdered" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jul 15 09:11:17 CST 2017.
    -->
    insert into ku_ordered
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="itemid != null" >
        itemid,
      </if>
      <if test="ordersid != null" >
        ordersid,
      </if>
      <if test="userid != null" >
        userid,
      </if>
      <if test="sendcompany != null" >
        sendcompany,
      </if>
      <if test="sendrealname != null" >
        sendrealname,
      </if>
      <if test="sendmobile != null" >
        sendmobile,
      </if>
      <if test="sendarea != null" >
        sendarea,
      </if>
      <if test="sendaddress != null" >
        sendaddress,
      </if>
      <if test="recarea != null" >
        recarea,
      </if>
      <if test="recrealname != null" >
        recrealname,
      </if>
      <if test="recmobile != null" >
        recmobile,
      </if>
      <if test="recaddress != null" >
        recaddress,
      </if>
      <if test="carlength != null" >
        carlength,
      </if>
      <if test="cartype != null" >
        cartype,
      </if>
      <if test="goodsweight != null" >
        goodsweight,
      </if>
      <if test="title != null" >
        title,
      </if>
      <if test="allfee != null" >
        allfee,
      </if>
      <if test="goodsnote != null" >
        goodsnote,
      </if>
      <if test="runstatus != null" >
        runstatus,
      </if>
      <if test="payway != null" >
        payway,
      </if>
      <if test="addtime != null" >
        addtime,
      </if>
      <if test="updatetime != null" >
        updatetime,
      </if>
      <if test="signtime != null" >
        signtime,
      </if>
      <if test="delstatus != null" >
        delstatus,
      </if>
      <if test="evaluation != null" >
        evaluation,
      </if>
      <if test="transportbyid != null" >
        transportbyid,
      </if>
      <if test="editer != null" >
        editer,
      </if>
      <if test="longitude != null" >
        longitude,
      </if>
      <if test="latitude != null" >
        latitude,
      </if>
      <if test="status != null" >
        status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="itemid != null" >
        #{itemid,jdbcType=INTEGER},
      </if>
      <if test="ordersid != null" >
        #{ordersid,jdbcType=BIGINT},
      </if>
      <if test="userid != null" >
        #{userid,jdbcType=INTEGER},
      </if>
      <if test="sendcompany != null" >
        #{sendcompany,jdbcType=VARCHAR},
      </if>
      <if test="sendrealname != null" >
        #{sendrealname,jdbcType=VARCHAR},
      </if>
      <if test="sendmobile != null" >
        #{sendmobile,jdbcType=VARCHAR},
      </if>
      <if test="sendarea != null" >
        #{sendarea,jdbcType=INTEGER},
      </if>
      <if test="sendaddress != null" >
        #{sendaddress,jdbcType=VARCHAR},
      </if>
      <if test="recarea != null" >
        #{recarea,jdbcType=INTEGER},
      </if>
      <if test="recrealname != null" >
        #{recrealname,jdbcType=VARCHAR},
      </if>
      <if test="recmobile != null" >
        #{recmobile,jdbcType=VARCHAR},
      </if>
      <if test="recaddress != null" >
        #{recaddress,jdbcType=VARCHAR},
      </if>
      <if test="carlength != null" >
        #{carlength,jdbcType=VARCHAR},
      </if>
      <if test="cartype != null" >
        #{cartype,jdbcType=VARCHAR},
      </if>
      <if test="goodsweight != null" >
        #{goodsweight,jdbcType=VARCHAR},
      </if>
      <if test="title != null" >
        #{title,jdbcType=VARCHAR},
      </if>
      <if test="allfee != null" >
        #{allfee,jdbcType=DECIMAL},
      </if>
      <if test="goodsnote != null" >
        #{goodsnote,jdbcType=VARCHAR},
      </if>
      <if test="runstatus != null" >
        #{runstatus,jdbcType=VARCHAR},
      </if>
      <if test="payway != null" >
        #{payway,jdbcType=INTEGER},
      </if>
      <if test="addtime != null" >
        #{addtime,jdbcType=INTEGER},
      </if>
      <if test="updatetime != null" >
        #{updatetime,jdbcType=INTEGER},
      </if>
      <if test="signtime != null" >
        #{signtime,jdbcType=INTEGER},
      </if>
      <if test="delstatus != null" >
        #{delstatus,jdbcType=INTEGER},
      </if>
      <if test="evaluation != null" >
        #{evaluation,jdbcType=INTEGER},
      </if>
      <if test="transportbyid != null" >
        #{transportbyid,jdbcType=INTEGER},
      </if>
      <if test="editer != null" >
        #{editer,jdbcType=VARCHAR},
      </if>
      <if test="longitude != null" >
        #{longitude,jdbcType=DECIMAL},
      </if>
      <if test="latitude != null" >
        #{latitude,jdbcType=DECIMAL},
      </if>
      <if test="status != null" >
        #{status,jdbcType=BIT},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.kuheng.entity.member.KuOrdered" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jul 15 09:11:17 CST 2017.
    -->
    update ku_ordered
    <set >
      <if test="ordersid != null" >
        ordersid = #{ordersid,jdbcType=BIGINT},
      </if>
      <if test="userid != null" >
        userid = #{userid,jdbcType=INTEGER},
      </if>
      <if test="sendcompany != null" >
        sendcompany = #{sendcompany,jdbcType=VARCHAR},
      </if>
      <if test="sendrealname != null" >
        sendrealname = #{sendrealname,jdbcType=VARCHAR},
      </if>
      <if test="sendmobile != null" >
        sendmobile = #{sendmobile,jdbcType=VARCHAR},
      </if>
      <if test="sendarea != null" >
        sendarea = #{sendarea,jdbcType=INTEGER},
      </if>
      <if test="sendaddress != null" >
        sendaddress = #{sendaddress,jdbcType=VARCHAR},
      </if>
      <if test="recarea != null" >
        recarea = #{recarea,jdbcType=INTEGER},
      </if>
      <if test="recrealname != null" >
        recrealname = #{recrealname,jdbcType=VARCHAR},
      </if>
      <if test="recmobile != null" >
        recmobile = #{recmobile,jdbcType=VARCHAR},
      </if>
      <if test="recaddress != null" >
        recaddress = #{recaddress,jdbcType=VARCHAR},
      </if>
      <if test="carlength != null" >
        carlength = #{carlength,jdbcType=VARCHAR},
      </if>
      <if test="cartype != null" >
        cartype = #{cartype,jdbcType=VARCHAR},
      </if>
      <if test="goodsweight != null" >
        goodsweight = #{goodsweight,jdbcType=VARCHAR},
      </if>
      <if test="title != null" >
        title = #{title,jdbcType=VARCHAR},
      </if>
      <if test="allfee != null" >
        allfee = #{allfee,jdbcType=DECIMAL},
      </if>
      <if test="goodsnote != null" >
        goodsnote = #{goodsnote,jdbcType=VARCHAR},
      </if>
      <if test="runstatus != null" >
        runstatus = #{runstatus,jdbcType=VARCHAR},
      </if>
      <if test="payway != null" >
        payway = #{payway,jdbcType=INTEGER},
      </if>
      <if test="addtime != null" >
        addtime = #{addtime,jdbcType=INTEGER},
      </if>
      <if test="updatetime != null" >
        updatetime = #{updatetime,jdbcType=INTEGER},
      </if>
      <if test="signtime != null" >
        signtime = #{signtime,jdbcType=INTEGER},
      </if>
      <if test="delstatus != null" >
        delstatus = #{delstatus,jdbcType=INTEGER},
      </if>
      <if test="evaluation != null" >
        evaluation = #{evaluation,jdbcType=INTEGER},
      </if>
      <if test="transportbyid != null" >
        transportbyid = #{transportbyid,jdbcType=INTEGER},
      </if>
      <if test="editer != null" >
        editer = #{editer,jdbcType=VARCHAR},
      </if>
      <if test="longitude != null" >
        longitude = #{longitude,jdbcType=DECIMAL},
      </if>
      <if test="latitude != null" >
        latitude = #{latitude,jdbcType=DECIMAL},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=BIT},
      </if>
    </set>
    where itemid = #{itemid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.kuheng.entity.member.KuOrdered" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jul 15 09:11:17 CST 2017.
    -->
    update ku_ordered
    set ordersid = #{ordersid,jdbcType=BIGINT},
      userid = #{userid,jdbcType=INTEGER},
      sendcompany = #{sendcompany,jdbcType=VARCHAR},
      sendrealname = #{sendrealname,jdbcType=VARCHAR},
      sendmobile = #{sendmobile,jdbcType=VARCHAR},
      sendarea = #{sendarea,jdbcType=INTEGER},
      sendaddress = #{sendaddress,jdbcType=VARCHAR},
      recarea = #{recarea,jdbcType=INTEGER},
      recrealname = #{recrealname,jdbcType=VARCHAR},
      recmobile = #{recmobile,jdbcType=VARCHAR},
      recaddress = #{recaddress,jdbcType=VARCHAR},
      carlength = #{carlength,jdbcType=VARCHAR},
      cartype = #{cartype,jdbcType=VARCHAR},
      goodsweight = #{goodsweight,jdbcType=VARCHAR},
      title = #{title,jdbcType=VARCHAR},
      allfee = #{allfee,jdbcType=DECIMAL},
      goodsnote = #{goodsnote,jdbcType=VARCHAR},
      runstatus = #{runstatus,jdbcType=VARCHAR},
      payway = #{payway,jdbcType=INTEGER},
      addtime = #{addtime,jdbcType=INTEGER},
      updatetime = #{updatetime,jdbcType=INTEGER},
      signtime = #{signtime,jdbcType=INTEGER},
      delstatus = #{delstatus,jdbcType=INTEGER},
      evaluation = #{evaluation,jdbcType=INTEGER},
      transportbyid = #{transportbyid,jdbcType=INTEGER},
      editer = #{editer,jdbcType=VARCHAR},
      longitude = #{longitude,jdbcType=DECIMAL},
      latitude = #{latitude,jdbcType=DECIMAL},
      status = #{status,jdbcType=BIT}
    where itemid = #{itemid,jdbcType=INTEGER}
  </update>
  <select id="selectCountByOidAndUid" parameterType="map" resultType="int">
  	select count(*) from ku_ordered 
  	where 
  	ordersid=#{ordersid,jdbcType=INTEGER} 
  	and
  	userid = #{userid,jdbcType=INTEGER}
  	and
  	status = 1
  </select>
  <update id="updateStateByOidAndUid" parameterType="map">
  	update ku_ordered
  	set 
  	status = 3
  	where 
  	ordersid=#{ordersid,jdbcType=INTEGER} 
  	and
  	userid = #{userid,jdbcType=INTEGER}
  	and
  	status = 1
  	
  </update>

  <select id="selectMyOrderByState" parameterType="java.util.Map" resultType="java.util.Map">
  	  select  ku.itemid,ku.sendrealname,ku.sendaddress,ku.recaddress,ku.carlength,ku.cartype,ku.goodsweight,ku.allfee,ku.runstatus,ku.addtime,ku.evaluation,ku.userid,ku.ordersid,e.headimage 
  	  from ku_ordered ku join e_user e on ku.userid=e.id 
  	  where ku.transportbyid=#{transportId,jdbcType=INTEGER} and ku.runstatus=#{state,jdbcType=VARCHAR}
  	  <if test="state2!=null and state2!=''">
  	  	or ku.runstatus=#{state2,jdbcType=VARCHAR}
  	  </if>
  </select>
  
  <select id="selectWayBillById" parameterType="java.lang.Integer" resultType="java.util.Map">
  	  select ku.ordersid,ku.sendrealname,ku.sendaddress,ku.sendmobile,ku.recaddress,ku.carlength,ku.cartype,ku.goodsweight,ku.allfee,ku.runstatus,ku.addtime,ku.evaluation ,ku.userid,e.postcard
  	  from ku_ordered ku join e_user e on ku.userid=e.id 
  	  where ku.itemid= #{itemId,jdbcType=INTEGER}
  </select>
  
  <update id="updateByOrderId" parameterType="com.kuheng.entity.member.KuOrdered" >
    update ku_ordered
    <set >
      <if test="userid != null" >
        userid = #{userid,jdbcType=INTEGER},
      </if>
      <if test="sendcompany != null" >
        sendcompany = #{sendcompany,jdbcType=VARCHAR},
      </if>
      <if test="sendrealname != null" >
        sendrealname = #{sendrealname,jdbcType=VARCHAR},
      </if>
      <if test="sendmobile != null" >
        sendmobile = #{sendmobile,jdbcType=VARCHAR},
      </if>
      <if test="sendarea != null" >
        sendarea = #{sendarea,jdbcType=INTEGER},
      </if>
      <if test="sendaddress != null" >
        sendaddress = #{sendaddress,jdbcType=VARCHAR},
      </if>
      <if test="recarea != null" >
        recarea = #{recarea,jdbcType=INTEGER},
      </if>
      <if test="recrealname != null" >
        recrealname = #{recrealname,jdbcType=VARCHAR},
      </if>
      <if test="recmobile != null" >
        recmobile = #{recmobile,jdbcType=VARCHAR},
      </if>
      <if test="recaddress != null" >
        recaddress = #{recaddress,jdbcType=VARCHAR},
      </if>
      <if test="carlength != null" >
        carlength = #{carlength,jdbcType=VARCHAR},
      </if>
      <if test="cartype != null" >
        cartype = #{cartype,jdbcType=VARCHAR},
      </if>
      <if test="goodsweight != null" >
        goodsweight = #{goodsweight,jdbcType=VARCHAR},
      </if>
      <if test="title != null" >
        title = #{title,jdbcType=VARCHAR},
      </if>
      <if test="allfee != null" >
        allfee = #{allfee,jdbcType=DECIMAL},
      </if>
      <if test="goodsnote != null" >
        goodsnote = #{goodsnote,jdbcType=VARCHAR},
      </if>
      <if test="runstatus != null" >
        runstatus = #{runstatus,jdbcType=VARCHAR},
      </if>
      <if test="payway != null" >
        payway = #{payway,jdbcType=INTEGER},
      </if>
      <if test="addtime != null" >
        addtime = #{addtime,jdbcType=INTEGER},
      </if>
      <if test="updatetime != null" >
        updatetime = #{updatetime,jdbcType=INTEGER},
      </if>
      <if test="signtime != null" >
        signtime = #{signtime,jdbcType=INTEGER},
      </if>
      <if test="delstatus != null" >
        delstatus = #{delstatus,jdbcType=INTEGER},
      </if>
      <if test="evaluation != null" >
        evaluation = #{evaluation,jdbcType=INTEGER},
      </if>
      <if test="transportbyid != null" >
        transportbyid = #{transportbyid,jdbcType=INTEGER},
      </if>
      <if test="editer != null" >
        editer = #{editer,jdbcType=VARCHAR},
      </if>
      <if test="longitude != null" >
        longitude = #{longitude,jdbcType=DECIMAL},
      </if>
      <if test="latitude != null" >
        latitude = #{latitude,jdbcType=DECIMAL},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=BIT},
      </if>
    </set>
    where ordersid = #{ordersid,jdbcType=BIGINT}
  </update>
  
  <select id="selectPaging" parameterType="java.util.Map" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from ku_ordered where 1=1
	<!-- 
	      <if test="startTime != 0 and startTime != null">
	      	and addtime &gt; #{startTime,jdbcType=INTEGER}
	      </if>
	      <if test="endTime != 0 and endTime != null">
	      	and addtime &lt; #{endTime,jdbcType=INTEGER}
	      </if>
	       -->
	      
		order by addtime desc limit
		#{firstResult,jdbcType=INTEGER},#{maxResult,jdbcType=INTEGER}
	</select>



	<select id="selectCount" parameterType="java.util.Map"
		resultType="java.lang.Integer">
		select count(*)
		from ku_ordered where 1=1
<!-- 
		 <if test="startTime != 0 and startTime != null">
	      	and addtime &gt; #{startTime,jdbcType=INTEGER}
	      </if>
	      <if test="endTime != 0 and endTime != null">
	      	and addtime &lt; #{endTime,jdbcType=INTEGER}
	      </if>
	       -->
	</select>
	
	<select id="selectPagingByTime" parameterType="java.util.Map" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from ku_ordered where 1=1 
	      <if test="addtime != 0 and addtime != null">
	      	and addtime &lt; #{addtime,jdbcType=INTEGER}
	      </if>
		order by addtime desc limit
		#{firstResult,jdbcType=INTEGER},#{maxResult,jdbcType=INTEGER}
	</select>
</mapper>